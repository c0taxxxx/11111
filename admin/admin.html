<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ Панель</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Общие стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Icons", "Helvetica Neue", Helvetica, Arial, sans-serif;
        }

        body {
            background-color: #f5f5f7;
            color: #1d1d1f;
            -webkit-font-smoothing: antialiased;
        }

        /* Навигационная панель */
        .admin-nav {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .admin-logo {
            font-size: 1.2rem;
            font-weight: 600;
            color: #0071e3;
        }

        .admin-menu {
            list-style: none;
            display: flex;
            gap: 15px;
        }

        .admin-menu li a {
            text-decoration: none;
            color: #86868b;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .admin-menu li a:hover,
        .admin-menu li a.active {
            background-color: #0071e3;
            color: white;
        }

        .admin-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 20px;
        }

        /* Контентные области */
        .content-section {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            padding: 25px;
            margin-bottom: 30px;
        }

        /* Формы */
        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            font-size: 13px;
            font-weight: 500;
            color: #5f6368;
            display: block;
            margin-bottom: 6px;
        }

        .form-control {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #d2d2d7;
            border-radius: 8px;
            background-color: #fff;
            transition: border-color 0.2s ease;
            font-size: 15px;
        }

        .form-control:focus {
            border-color: #0071e3;
            outline: none;
        }

        /* Таблицы */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #e4e8ec;
        }

        table th {
            font-weight: 600;
            color: #5f6368;
            background-color: #f8f9fa;
        }

        table tr:hover td {
            background-color: #f9fbff;
        }

        /* Кнопки */
        .btn {
            padding: 10px 20px;
            font-size: 15px;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: #0071e3;
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background-color: #0062d4;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid #d2d2d7;
            color: #5f6368;
        }

        .btn-outline:hover {
            background-color: #f1f3f4;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 14px;
        }

        /* Модальные окна */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-window {
            background-color: white;
            border-radius: 12px;
            width: 500px;
            max-width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid #e4e8ec;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 10px 20px;
            border-top: 1px solid #e4e8ec;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .admin-nav {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .admin-menu {
                width: 100%;
                justify-content: center;
                margin-top: 10px;
            }
            
            .admin-menu li {
                width: 50%;
            }
        }
    </style>
</head>
<body>
    <!-- Админская навигация -->
    <nav class="admin-nav">
        <div class="admin-logo">Admin Panel</div>
        <ul class="admin-menu">
            <li><a href="#" class="active">Главная</a></li>
            <li><a href="#">Презентации</a></li>
            <li><a href="#">Аудиофайлы</a></li>
            <li><a href="#">Темы</a></li>
            <li><a href="#">Пользователи</a></li>
            <li><a href="#">Отчеты</a></li>
        </ul>
    </nav>

    <!-- Основной контент -->
    <div class="admin-container">
        <h1>Админ Панель</h1>

        <!-- Добавление презентации -->
        <div class="content-section">
            <h2>Добавить презентацию</h2>
            <div id="addPresentationModal" class="modal-window">
                <div class="modal-header">
                    <h3>Добавить Новую Презентацию</h3>
                    <button class="btn-outline" id="closeModal">✕</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="title">Название презентации</label>
                        <input type="text" id="title" class="form-control" placeholder="Введите название">
                    </div>
                    <div class="form-group">
                        <label for="link">Ссылка на презентацию</label>
                        <input type="url" id="link" class="form-control" placeholder="https://...">
                    </div>
                    <div class="form-group">
                        <label for="category">Категория</label>
                        <select id="category" class="form-control">
                            <option value="marketing">Маркетинг</option>
                            <option value="sales">Продажи</option>
                            <option value="product">Продукт</option>
                            <option value="training">Обучение</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-small btn-outline hidden" id="editSubmit">Сохранить</button>
                    <button class="btn-small btn-primary" id="addSubmit">Добавить</button>
                    <button class="btn-small btn-outline" id="cancelEdit">Отмена</button>
                </div>
            </div>
        </div>

        <!-- Список презентаций -->
        <div class="content-section">
            <h2>Управление презентациями</h2>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h3>Все презентации: <span id="count">0</span></h3>
                </div>
                <button class="btn-primary" id="showAllPresentations">Показать все</button>
            </div>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Название</th>
                            <th>Категория</th>
                            <th>Дата</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="presentationsList">
                        <!-- Здесь будут отображаться презентации -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Статистика -->
        <div class="content-section">
            <h2>Статистика</h2>
            <div id="statsContent">
                <!-- Статистическая информация -->
            </div>
        </div>
    </div>

    <script>
        // Переменные для хранения данных обо всех элементах
        let presentations = JSON.parse(localStorage.getItem('presentations')) || [];
        let audios = JSON.parse(localStorage.getItem('audios')) || [];
        let topics = JSON.parse(localStorage.getItem('topics')) || [];
        let roles = JSON.parse(localStorage.getItem('roles')) || [
            { id: 1, name: "Администратор", permission: 100 },
            { id: 2, name: "Учитель", permission: 50 },
            { id: 3, name: "Студент", permission: 10 },
        ];
        let users = JSON.parse(localStorage.getItem('users')) || [];

        // Функция для отображения данных в таблице
        function displayPresentations() {
            const tbody = document.getElementById('presentationsList');
            let html = '';
            
            presentations.forEach((presentation, index) => {
                html += `
                    <tr>
                        <td>${presentation.id}</td>
                        <td>${presentation.title}</td>
                        <td>${getCategoryName(presentation.category)}</td>
                        <td>${new Date(presentation.date).toLocaleDateString()}</td>
                        <td>
                            <button class="btn-small btn-outline edit-btn" data-id="${presentation.id}">Редактировать</button>
                            <button class="btn-small btn-danger delete-btn" data-id="${presentation.id}">Удалить</button>
                        </td>
                    </tr>
                `;
            });
            
            if (!html) {
                html = '<tr><td colspan="5" style="text-align: center;">Презентаций пока нет. Добавьте новую в форме выше.</td></tr>';
            }
            
            tbody.innerHTML = html;
            
            // Добавляем обработчики событий
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.dataset.id;
                    editPresentation(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.dataset.id;
                    if (confirm('Вы уверены, что хотите удалить эту презентацию?')) {
                        deletePresentation(id);
                    }
                });
            });
        }

        // Показать все презентации
        document.getElementById('showAllPresentations').addEventListener('click', () => {
            const filter = document.getElementById('categoryFilter');
            filter.dispatchEvent(new Event('change'));
        });

        // Фильтрация по категории
        // ... [код фильтрации] ...

        // Добавление презентации
        document.getElementById('addSubmit').addEventListener('click', addPresentation);
        document.getElementById('cancelEdit').addEventListener('click', () => {
            document.getElementById('add PresentationModal').classList.remove('flex');
            document.querySelector('.modal-backdrop').remove();
            document.getElementById('title').value = '';
            document.getElementById('link').value = '';
            document.getElementById('category').value = 'marketing';
        });

        // Редактирование презентации
        document.getElementById('editSubmit').addEventListener('click', editPresentation);
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('edit-btn')) {
                const id = e.target.dataset.id;
                editPresentation(id);
            }
        });

        // Удаление презентации
        function deletePresentation(id) {
            presentations = presentations.filter(p => p.id.toString() !== id.toString());
            localStorage.setItem('presentations', JSON.stringify(presentations));
            displayPresentations();
            updateStats();
        }

        // Редактирование презентации
        function editPresentation(id) {
            // ... [реализация редактирования] ...
        }

        // Добавление презентации
        function addPresentation() {
            // ... [реализация добавления] ...
        }

        // Отображение статистики
        function updateStats() {
            // ... [код для обновления статистики] ...
        }

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            displayPresentations();
            updateStats();
            
            // Обработчик модального окна для добавления
            document.getElementById('addPresentationModal').addEventListener('click', function() {
                this.classList.add('flex');
                document.getElementById('editSubmit').classList.add('hidden');
                document.getElementById('addSubmit').disabled = false;
            });
            
            // Фильтрация по категории
            const categoryFilter = document.getElementById('categoryFilter');
            // ... [код фильтрации] ...

            // Загрузка данных
            // ... [код загрузки] ...
        });
    </script>
</body>
</html>
